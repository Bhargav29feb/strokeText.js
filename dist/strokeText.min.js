!function(e,t){"function"==typeof define&&define.amd?define(t):"object"==typeof exports?module.exports=t(require,exports,module):e.StrokeText=t()}(this,function(e,t,n){return function(e,t){function n(e,t){e&&t&&t.parentNode&&t.parentNode.insertBefore(e,t.nextSibling)}function l(e){e&&e.parentNode&&e.parentNode.removeChild(e)}var i=this;if(i.version="0.9.0",i.elem="string"==typeof e?document.getElementById(e):e,i.options={lineCap:"round",lineJoin:"round",miterLimit:10,lineDashArray:[0,0]},t&&"object"==typeof t)for(var o in i.options)t.hasOwnProperty(o)&&null!==t[o]&&(i.options[o]=t[o]);i.reset=function(){var e=document.getElementById(i.containId);if(e){l(i.elem),l(i.canvasId),n(i.elem,e),i.elem.style=i.elemStyle;for(var t in i.inlineStyles)i.elem.style[t]=i.inlineStyles[t];l(e)}},i.stroke=function(e,t){i.reset();var o=i.elem.cloneNode(!0);o.textContent="X",n(o,i.elem);var r=o.offsetHeight;l(o),i.elemStyle=window.getComputedStyle(i.elem),i.inlineStyles={};for(var s=0,a=i.elem.style.length;s<a;s++){var m=i.elem.style[s];i.inlineStyles[m]=i.elemStyle[m]}i.elem.style.width="100%",i.elem.style.boxSizing="border-box",i.elem.style.padding="0 "+e+"px";var y=i.elem.offsetWidth,d=i.elem.offsetHeight,p=i.elem.textContent.trim(),f=i.elemStyle.getPropertyValue("display"),u=i.elemStyle.getPropertyValue("font-family"),g=i.elemStyle.getPropertyValue("font-size"),c=i.elemStyle.getPropertyValue("font-weight"),h=i.elemStyle.getPropertyValue("font-style")+" "+c+" "+g+" "+u,v=i.elemStyle.getPropertyValue("text-align"),x=parseFloat(i.elemStyle.getPropertyValue("margin-top")),S=parseFloat(i.elemStyle.getPropertyValue("margin-bottom")),b=e;if(p){i.containId="outline-text-"+Math.random().toString().substring(2),i.canvasId=i.containId+"-canvas";var I=document.createElement("div");I.setAttribute("id",i.containId),I.style.width=y+"px",I.style.height=d+x+S+"px",I.style.display=f,I.style.position="relative";var C=document.createElement("canvas");C.setAttribute("id",i.canvasId),C.setAttribute("width",y),C.setAttribute("height",d+e),C.style.marginTop=x+"px",C.style.userSelect="none",n(I,i.elem),l(i.elem),i.elem.style.position="absolute",i.elem.style.top=0,I.appendChild(i.elem),I.appendChild(C);var w=document.getElementById(i.canvasId).getContext("2d"),P=0,A=y-2*b,V=0,k="top";switch(/firefox/i.test(navigator.userAgent)&&(console.log("firefox!"),k="hanging",V=r-parseFloat(g)-e/2,parseFloat(g)<40&&(V+=1)),v){case"center":P=y/2,i.elem.style.left=0;break;case"right":P=y-b,i.elem.style.right=b;break;default:P+=b,i.elem.style.left=b}w&&(w.font=h,w.textBaseline=k,w.textAlign=v,w.strokeStyle=t,w.lineJoin=i.options.lineJoin,w.lineCap=i.options.lineCap,w.setLineDash(i.options.lineDashArray),w.miterLimit=i.options.miterLimit,w.lineWidth=2*e,function(e,t,n,l,i,o){function r(t,r){var m=s;r>0&&"-"!==a.substr(-1)?m+=" "+t:m+=t,e.measureText(m).width>i&&r>0?(e.strokeText(s,n,l),s=t,l+=o):s=m,a=t}var s="",a="";t.split(" ").forEach(function(e,t){if(e.indexOf("-")>-1){for(var n=e;n.indexOf("-")>-1;){var l=n.indexOf("-")+1,i=n.substring(0,l);n=n.substring(l),r(i,t)}r(n,t)}else r(e,t)}),e.strokeText(s,n,l)}(w,p,P,V,A,r))}}}});