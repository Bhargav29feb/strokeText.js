!function(e,t){"function"==typeof define&&define.amd?define(t):"object"==typeof exports?module.exports=t(require,exports,module):e.StrokeText=t()}(this,function(e,t,n){return function(e,t){function n(e,t){e&&t&&t.parentNode&&t.parentNode.insertBefore(e,t.nextSibling)}function o(e){e&&e.parentNode&&e.parentNode.removeChild(e)}var l=this;if(l.version="0.10.1",l.elem="string"==typeof e?document.getElementById(e):e,l.options={lineCap:"round",lineJoin:"round",miterLimit:10,lineDashArray:[0,0],debug:!1},t&&"object"==typeof t)for(var i in l.options)t.hasOwnProperty(i)&&null!==t[i]&&(l.options[i]=t[i]);l.reset=function(){var e=document.getElementById(l.containId);if(e){o(l.elem),o(l.canvasId),n(l.elem,e),l.elem.style=l.elemStyle;for(var t in l.inlineStyles)l.elem.style[t]=l.inlineStyles[t];o(e)}},l.stroke=function(e,t){l.reset(),e=Math.abs(e),t="string"==typeof t?t:"red",l.elemStyle=window.getComputedStyle(l.elem),l.inlineStyles={};for(var i=0,r=l.elem.style.length;i<r;i++){var s=l.elem.style[i];l.inlineStyles[s]=l.elemStyle[s]}var a=l.elem.textContent.trim();if(a){var d=l.elemStyle.getPropertyValue("font-size");parseFloat(d),l.elem.style.width="100%",l.elem.style.boxSizing="border-box",l.elem.style.padding="0 "+e+"px";var m=l.elem.offsetWidth,y=l.elem.offsetHeight,p=l.elemStyle.getPropertyValue("display"),f=l.elemStyle.getPropertyValue("font-family"),u=l.elemStyle.getPropertyValue("font-weight"),c=l.elemStyle.getPropertyValue("font-style"),g=parseFloat(l.elemStyle.getPropertyValue("line-height")),h=c+" "+u+" "+d+"/"+g+"px "+f,v=l.elemStyle.getPropertyValue("text-align"),x=parseFloat(l.elemStyle.getPropertyValue("margin-top")),b=parseFloat(l.elemStyle.getPropertyValue("margin-bottom")),S=e;l.containId="strokeText-"+Math.random().toString().substring(2),l.canvasId=l.containId+"-canvas";var I=document.createElement("div");I.setAttribute("id",l.containId),I.style.width=m+"px",I.style.height=y+x+b+2*e+"px",I.style.display=p,I.style.position="relative";var P=document.createElement("canvas");P.setAttribute("id",l.canvasId),P.setAttribute("width",m),P.setAttribute("height",y+4*e),P.style.marginTop=x+"px",P.style.userSelect="none",l.options.debug&&(P.style.border="1px red solid"),n(I,l.elem),o(l.elem),l.elem.style.position="absolute";var w=e+"px";l.elem.style.top=w,l.options.debug&&(l.elem.style.border="1px yellow solid"),I.appendChild(l.elem),I.appendChild(P);var k=document.getElementById(l.canvasId).getContext("2d"),C=0,V=m-2*S,T=g/2+e;switch(l.options.debug&&(console.info("┎--- strokeText.js debug"),console.info("┃ canvasFont:",h),console.info("┃ canvasTopPos:",T),console.info("┃ txtLineHeight:",g),console.info("┖---")),v){case"center":C=m/2,l.elem.style.left=0;break;case"right":C=m-S,l.elem.style.right=S;break;default:C+=S,l.elem.style.left=S}k&&(k.font=h,k.textBaseline="middle",k.textAlign=v,k.strokeStyle=t,k.lineJoin=l.options.lineJoin,k.lineCap=l.options.lineCap,k.setLineDash(l.options.lineDashArray),k.miterLimit=l.options.miterLimit,k.lineWidth=2*e,function(e,t,n,o,l,i){function r(t,r){var d=s;r>0&&"-"!==a.substr(-1)?d+=" "+t:d+=t,e.measureText(d).width>l&&r>0?(e.strokeText(s,n,o),s=t,o+=i):s=d,a=t}var s="",a="";t.split(" ").forEach(function(e,t){if(e.indexOf("-")>-1){for(var n=e;n.indexOf("-")>-1;){var o=n.indexOf("-")+1,l=n.substring(0,o);n=n.substring(o),r(l,t)}r(n,t)}else r(e,t)}),e.strokeText(s,n,o)}(k,a,C,T,V,g))}}}});