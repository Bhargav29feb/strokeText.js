!function(e,t){"function"==typeof define&&define.amd?define(t):"object"==typeof exports?module.exports=t(require,exports,module):e.StrokeText=t()}(this,function(e,t,n){return function(e,t){function n(e,t){e&&t&&t.parentNode&&t.parentNode.insertBefore(e,t.nextSibling)}function i(e){e&&e.parentNode&&e.parentNode.removeChild(e)}function o(e){l[e]&&console.info("┃ "+e+":",l[e])}var l=this;if(l.version="0.12.0",l.elem="string"==typeof e?document.getElementById(e):e,l.options={lineCap:"round",lineJoin:"round",miterLimit:10,lineDashArray:[0,0],debug:!1,disableForFirefox:!1},t&&"object"==typeof t)for(var r in l.options)t.hasOwnProperty(r)&&null!==t[r]&&(l.options[r]=t[r]);l.reset=function(){var e=document.getElementById(l.containId);if(e){i(l.elem),i(l.canvasId),n(l.elem,e),l.elem.style=l.elemStyle;for(var t in l.inlineStyles)l.elem.style[t]=l.inlineStyles[t];i(e)}},l.stroke=function(e,t){if(!l.options.disableForFirefox||!/firefox/i.test(navigator.userAgent)){l.reset(),e=Math.abs(e),t="string"==typeof t?t:"red",l.elemStyle=window.getComputedStyle(l.elem),l.inlineStyles={};for(var r=0,s=l.elem.style.length;r<s;r++){var a=l.elem.style[r];l.inlineStyles[a]=l.elemStyle[a]}if(l.txt=l.elem.textContent.trim(),l.txt){var d=l.elemStyle.getPropertyValue("font-size");parseFloat(d),l.elem.style.width="100%",l.elem.style.boxSizing="border-box",l.elem.style.padding="0 "+e+"px";var p=l.elem.offsetWidth,m=l.elem.offsetHeight,y=l.elemStyle.getPropertyValue("display"),f=l.elemStyle.getPropertyValue("font-family"),u=l.elemStyle.getPropertyValue("font-weight"),c=l.elemStyle.getPropertyValue("font-style"),g=parseFloat(l.elemStyle.getPropertyValue("line-height")),x=l.elemStyle.getPropertyValue("text-align"),h=parseFloat(l.elemStyle.getPropertyValue("margin-top")),v=parseFloat(l.elemStyle.getPropertyValue("margin-bottom")),b=e;isNaN(g)&&(g=l.getLineHeight(l.elem)),l.txtLineHeight=g,l.canvasFont=c+" "+u+" "+d+"/"+g+"px "+f,l.containId="strokeText-"+Math.random().toString().substring(2),l.canvasId=l.containId+"-canvas";var S=document.createElement("div");S.setAttribute("id",l.containId),S.style.width=p+"px",S.style.height=m+h+v+2*e+"px",S.style.display=y,S.style.position="relative";var P=document.createElement("canvas");P.setAttribute("id",l.canvasId),P.setAttribute("width",p),P.setAttribute("height",m+4*e),P.style.marginTop=h+"px",P.style.userSelect="none",l.options.debug&&(P.style.border="1px red solid"),n(S,l.elem),i(l.elem),l.elem.style.position="absolute";var F=e+"px";l.elem.style.top=F,l.options.debug&&(l.elem.style.border="1px yellow solid"),S.appendChild(l.elem),S.appendChild(P);var w=P.getContext("2d"),I=0,C=p-2*b;switch(l.canvasTopPos=g/2+e,x){case"center":I=p/2,l.elem.style.left=0;break;case"right":I=p-b,l.elem.style.right=b;break;default:I+=b,l.elem.style.left=b}w&&(w.font=l.canvasFont,w.textBaseline="middle",w.textAlign=x,w.strokeStyle=t,w.lineJoin=l.options.lineJoin,w.lineCap=l.options.lineCap,w.setLineDash(l.options.lineDashArray),w.miterLimit=l.options.miterLimit,w.lineWidth=2*e,l.options.debug&&(console.info("┎--- ",l.containId),console.info('┃ "'+l.txt+'"'),o("canvasFont"),o("canvasTopPos"),o("txtLineHeight"),console.info("┖---")),function(e,t,n,i,o,l){function r(t,r){var d=s;r>0&&"-"!==a.substr(-1)?d+=" "+t:d+=t,e.measureText(d).width>o&&r>0?(e.strokeText(s,n,i),s=t,i+=l):s=d,a=t}var s="",a="";t.split(" ").forEach(function(e,t){if(e.indexOf("-")>-1){for(var n=e;n.indexOf("-")>-1;){var i=n.indexOf("-")+1,o=n.substring(0,i);n=n.substring(i),r(o,t)}r(n,t)}else r(e,t)}),e.strokeText(s,n,i)}(w,l.txt,I,l.canvasTopPos,C,g))}}}}});