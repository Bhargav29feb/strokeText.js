!function(e,t){"function"==typeof define&&define.amd?define(t):"object"==typeof exports?module.exports=t(require,exports,module):e.StrokeText=t()}(this,function(e,t,n){return function(e,t){function n(e,t){e&&t&&t.parentNode&&t.parentNode.insertBefore(e,t.nextSibling)}function o(e){e&&e.parentNode&&e.parentNode.removeChild(e)}var i=this;if(i.version="0.10.0",i.elem="string"==typeof e?document.getElementById(e):e,i.options={lineCap:"round",lineJoin:"round",miterLimit:10,lineDashArray:[0,0],debug:!1},t&&"object"==typeof t)for(var l in i.options)t.hasOwnProperty(l)&&null!==t[l]&&(i.options[l]=t[l]);i.reset=function(){var e=document.getElementById(i.containId);if(e){o(i.elem),o(i.canvasId),n(i.elem,e),i.elem.style=i.elemStyle;for(var t in i.inlineStyles)i.elem.style[t]=i.inlineStyles[t];o(e)}},i.stroke=function(e,t){i.reset(),e=Math.abs(e),t="string"==typeof t?t:"red",i.elemStyle=window.getComputedStyle(i.elem),i.inlineStyles={};for(var l=0,r=i.elem.style.length;l<r;l++){var s=i.elem.style[l];i.inlineStyles[s]=i.elemStyle[s]}var a=i.elem.textContent.trim();if(a){var d=i.elemStyle.getPropertyValue("font-size");parseFloat(d),i.elem.style.width="100%",i.elem.style.boxSizing="border-box",i.elem.style.padding="0 "+e+"px";var m=i.elem.offsetWidth,p=i.elem.offsetHeight,y=i.elemStyle.getPropertyValue("display"),f=i.elemStyle.getPropertyValue("font-family"),u=i.elemStyle.getPropertyValue("font-weight"),c=i.elemStyle.getPropertyValue("font-style"),g=parseFloat(i.elemStyle.getPropertyValue("line-height")),h=c+" "+u+" "+d+"/"+g+"px "+f,v=i.elemStyle.getPropertyValue("text-align"),x=parseFloat(i.elemStyle.getPropertyValue("margin-top")),b=parseFloat(i.elemStyle.getPropertyValue("margin-bottom")),S=e;i.containId="strokeText-"+Math.random().toString().substring(2),i.canvasId=i.containId+"-canvas";var w=document.createElement("div");w.setAttribute("id",i.containId),w.style.width=m+"px",w.style.height=p+x+b+2*e+"px",w.style.display=y,w.style.position="relative";var P=document.createElement("canvas");P.setAttribute("id",i.canvasId),P.setAttribute("width",m),P.setAttribute("height",p+4*e),P.style.marginTop=x+"px",P.style.userSelect="none",i.options.debug&&(P.style.border="1px red solid"),n(w,i.elem),o(i.elem),i.elem.style.position="absolute";var I=e+1;/firefox/i.test(window.navigator.userAgent)&&(I-=1),i.elem.style.top=I+"px",i.options.debug&&(i.elem.style.border="1px yellow solid"),w.appendChild(i.elem),w.appendChild(P);var k=document.getElementById(i.canvasId).getContext("2d"),C=0,T=m-2*S,V=g/2+e;switch(i.options.debug&&(console.info("┎--- strokeText.js debug"),console.info("┃ canvasFont:",h),console.info("┃ canvasTopPos:",V),console.info("┃ elemTopPos:",I),console.info("┃ txtLineHeight:",g),console.info("┖---")),v){case"center":C=m/2,i.elem.style.left=0;break;case"right":C=m-S,i.elem.style.right=S;break;default:C+=S,i.elem.style.left=S}k&&(k.font=h,k.textBaseline="middle",k.textAlign=v,k.strokeStyle=t,k.lineJoin=i.options.lineJoin,k.lineCap=i.options.lineCap,k.setLineDash(i.options.lineDashArray),k.miterLimit=i.options.miterLimit,k.lineWidth=2*e,function(e,t,n,o,i,l){function r(t,r){var d=s;r>0&&"-"!==a.substr(-1)?d+=" "+t:d+=t,e.measureText(d).width>i&&r>0?(e.strokeText(s,n,o),s=t,o+=l):s=d,a=t}var s="",a="";t.split(" ").forEach(function(e,t){if(e.indexOf("-")>-1){for(var n=e;n.indexOf("-")>-1;){var o=n.indexOf("-")+1,i=n.substring(0,o);n=n.substring(o),r(i,t)}r(n,t)}else r(e,t)}),e.strokeText(s,n,o)}(k,a,C,V,T,g))}}}});