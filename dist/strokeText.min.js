!function(e,t){"function"==typeof define&&define.amd?define(t):"object"==typeof exports?module.exports=t(require,exports,module):e.StrokeText=t()}(this,function(e,t,n){return function(e,t){function n(e,t){e&&t&&t.parentNode&&t.parentNode.insertBefore(e,t.nextSibling)}function i(e){e&&e.parentNode&&e.parentNode.removeChild(e)}var l=this;if(l.version="0.9.0",l.elem="string"==typeof e?document.getElementById(e):e,l.options={lineCap:"round",lineJoin:"round",miterLimit:10,lineDashArray:[0,0]},t&&"object"==typeof t)for(var o in l.options)t.hasOwnProperty(o)&&null!==t[o]&&(l.options[o]=t[o]);l.reset=function(){var e=document.getElementById(l.containId);if(e){i(l.elem),i(l.canvasId),n(l.elem,e),l.elem.style=l.elemStyle;for(var t in l.inlineStyles)l.elem.style[t]=l.inlineStyles[t];i(e)}},l.stroke=function(e,t){l.reset();var o=l.elem.cloneNode(!0);o.textContent="X",n(o,l.elem);var r=o.offsetHeight;i(o),l.elemStyle=window.getComputedStyle(l.elem),l.inlineStyles={};for(var s=0,a=l.elem.style.length;s<a;s++){var m=l.elem.style[s];l.inlineStyles[m]=l.elemStyle[m]}l.elem.style.width="100%",l.elem.style.boxSizing="border-box",l.elem.style.padding="0 "+e+"px";var y=l.elem.offsetWidth,d=l.elem.offsetHeight,p=l.elem.textContent.trim(),f=l.elemStyle.getPropertyValue("display"),u=l.elemStyle.getPropertyValue("font-family"),g=l.elemStyle.getPropertyValue("font-size"),c=l.elemStyle.getPropertyValue("font-weight"),h=l.elemStyle.getPropertyValue("font-style")+" "+c+" "+g+" "+u,v=l.elemStyle.getPropertyValue("text-align"),x=parseFloat(l.elemStyle.getPropertyValue("margin-top")),S=parseFloat(l.elemStyle.getPropertyValue("margin-bottom")),b=e;if(p){l.containId="outline-text-"+Math.random().toString().substring(2),l.canvasId=l.containId+"-canvas";var I=document.createElement("div");I.setAttribute("id",l.containId),I.style.width=y+"px",I.style.height=d+x+S+"px",I.style.display=f,I.style.position="relative";var C=document.createElement("canvas");C.setAttribute("id",l.canvasId),C.setAttribute("width",y),C.setAttribute("height",d+e),C.style.marginTop=x+"px",C.style.userSelect="none",n(I,l.elem),i(l.elem),l.elem.style.position="absolute",l.elem.style.top=0,I.appendChild(l.elem),I.appendChild(C);var w=document.getElementById(l.canvasId).getContext("2d"),P=0,A=y-2*b,V=0,k="top";switch(/firefox/i.test(navigator.userAgent)&&(k="hanging",V=r-parseFloat(g)-e/2),v){case"center":P=y/2,l.elem.style.left=0;break;case"right":P=y-b,l.elem.style.right=b;break;default:P+=b,l.elem.style.left=b}w&&(w.font=h,w.textBaseline=k,w.textAlign=v,w.strokeStyle=t,w.lineJoin=l.options.lineJoin,w.lineCap=l.options.lineCap,w.setLineDash(l.options.lineDashArray),w.miterLimit=l.options.miterLimit,w.lineWidth=2*e,function(e,t,n,i,l,o){function r(t,r){var m=s;r>0&&"-"!==a.substr(-1)?m+=" "+t:m+=t,e.measureText(m).width>l&&r>0?(e.strokeText(s,n,i),s=t,i+=o):s=m,a=t}var s="",a="";t.split(" ").forEach(function(e,t){if(e.indexOf("-")>-1){for(var n=e;n.indexOf("-")>-1;){var i=n.indexOf("-")+1,l=n.substring(0,i);n=n.substring(i),r(l,t)}r(n,t)}else r(e,t)}),e.strokeText(s,n,i)}(w,p,P,V,A,r))}}}});