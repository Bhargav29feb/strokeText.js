!function(e,t){"function"==typeof define&&define.amd?define(t):"object"==typeof exports?module.exports=t(require,exports,module):e.StrokeText=t()}(this,function(e,t,n){return function(e,t){var n=this;if(n.version="0.10.0",n.elem="string"==typeof e?document.getElementById(e):e,n.options={lineCap:"round",lineJoin:"round",miterLimit:10,lineDashArray:[0,0]},t&&"object"==typeof t)for(var i in n.options)t.hasOwnProperty(i)&&null!==t[i]&&(n.options[i]=t[i]);function l(e,t){e&&t&&t.parentNode&&t.parentNode.insertBefore(e,t.nextSibling)}function o(e){e&&e.parentNode&&e.parentNode.removeChild(e)}n.reset=function(){var e=document.getElementById(n.containId);if(e){for(var t in o(n.elem),o(n.canvasId),l(n.elem,e),n.elem.style=n.elemStyle,n.inlineStyles)n.elem.style[t]=n.inlineStyles[t];o(e)}},n.stroke=function(e,t){n.reset();var i=n.elem.cloneNode(!0);i.textContent="X",l(i,n.elem);var r=i.offsetHeight;o(i),n.elemStyle=window.getComputedStyle(n.elem),n.inlineStyles={};for(var s=0,a=n.elem.style.length;s<a;s++){var m=n.elem.style[s];n.inlineStyles[m]=n.elemStyle[m]}var y=n.elemStyle.getPropertyValue("font-size");n.elem.style.width="100%",n.elem.style.boxSizing="border-box",n.elem.style.padding=e+"px";var d=n.elem.offsetWidth,p=n.elem.offsetHeight,f=n.elem.textContent.trim(),u=n.elemStyle.getPropertyValue("display"),g=n.elemStyle.getPropertyValue("font-family"),c=n.elemStyle.getPropertyValue("font-weight"),h=n.elemStyle.getPropertyValue("font-style")+" "+c+" "+y+"/"+r+"px "+g,v=n.elemStyle.getPropertyValue("text-align"),x=parseFloat(n.elemStyle.getPropertyValue("margin-top")),S=parseFloat(n.elemStyle.getPropertyValue("margin-bottom")),b=e;if(f){n.containId="strokeText-"+Math.random().toString().substring(2),n.canvasId=n.containId+"-canvas";var I=document.createElement("div");I.setAttribute("id",n.containId),I.style.width=d+"px",I.style.height=p+x+S+2*e+"px",I.style.display=u,I.style.position="relative";var C=document.createElement("canvas");C.setAttribute("id",n.canvasId),C.setAttribute("width",d),C.setAttribute("height",p+2*e),C.style.marginTop=x+"px",C.style.userSelect="none",l(I,n.elem),o(n.elem),n.elem.style.position="absolute",n.elem.style.top=e+"px",I.appendChild(n.elem),I.appendChild(C);var w=document.getElementById(n.canvasId).getContext("2d"),P=0,k=d-2*b,A=(r-parseFloat(y))/2,V="top";switch(/firefox/i.test(navigator.userAgent)&&(V="hanging",A=r-parseFloat(y)+e),v){case"center":P=d/2,n.elem.style.left=0;break;case"right":P=d-b,n.elem.style.right=b;break;default:P+=b,n.elem.style.left=b}w&&(w.font=h,w.textBaseline=V,w.textAlign=v,w.strokeStyle=t,w.lineJoin=n.options.lineJoin,w.lineCap=n.options.lineCap,w.setLineDash(n.options.lineDashArray),w.miterLimit=n.options.miterLimit,w.lineWidth=2*e,function(e,t,n,i,l,o){var r="",s="";function a(t,a){var m=r;a>0&&"-"!==s.substr(-1)?m+=" "+t:m+=t,e.measureText(m).width>l&&a>0?(e.strokeText(r,n,i),r=t,i+=o):r=m,s=t}t.split(" ").forEach(function(e,t){if(e.indexOf("-")>-1){for(var n=e;n.indexOf("-")>-1;){var i=n.indexOf("-")+1,l=n.substring(0,i);n=n.substring(i),a(l,t)}a(n,t)}else a(e,t)}),e.strokeText(r,n,i)}(w,f,P,A,k,r))}}}});